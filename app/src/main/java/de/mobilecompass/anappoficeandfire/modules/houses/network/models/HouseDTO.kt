package de.mobilecompass.anappoficeandfire.modules.houses.network.models

import com.squareup.moshi.Json
import com.squareup.moshi.JsonClass
import de.mobilecompass.anappoficeandfire.modules.houses.database.models.HouseDB

@JsonClass(generateAdapter = true)
data class HouseDTO(
    @Json(name = "url")
    val url: String,

    @Json(name = "name")
    val name: String
) {

    // ----------------------------------------------------------------------------
    // region Inner types
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // endregion
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // region Public methods
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // endregion
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // region Protected methods
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // endregion
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // region Private methods
    // ----------------------------------------------------------------------------

    // ----------------------------------------------------------------------------
    // endregion
    // ----------------------------------------------------------------------------

}

fun HouseDTO.asHouseDB(): HouseDB {
    val id = url.split("/").last().toLong()
    return HouseDB(
        id,
        url,
        name
    )
}

fun List<HouseDTO>.asHousesDB() = map {
    it.asHouseDB()
}
